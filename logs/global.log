2020-04-16 15:27:07,384 ERROR Onboarding Bot is not in the database
2020-04-16 15:49:17,100 ERROR affirmation module is not in the database
2020-04-22 18:46:39,882 ERROR :loudspeaker: [FATAL ERROR]name 'session' is not defined  File "/home/thierry/Desktop/stanford_pwbt/popbots-refactor/controllers/main.py", line 389, in dialog_flow_engine
    command,response_list,image,bot_name,reply_markup  = response_engine(session,user_id,user_message)
  File "/home/thierry/Desktop/stanford_pwbt/popbots-refactor/utils.py", line 66, in wrapper
    result = func(*args, **kwargs)
  File "/home/thierry/Desktop/stanford_pwbt/popbots-refactor/controllers/main.py", line 229, in response_engine
    bot_text,current_index,keyboard,triggers = get_bot_response(bot_id=bot_id,next_index=next_index,user_response=user_message,content_index=content_index,stressor_object=stressor)
  File "/home/thierry/Desktop/stanford_pwbt/popbots-refactor/utils.py", line 66, in wrapper
    result = func(*args, **kwargs)
  File "/home/thierry/Desktop/stanford_pwbt/popbots-refactor/controllers/message.py", line 253, in get_bot_response
    bot_user = session.query(Users).filter_by(id = bot_id).first()

2020-04-22 18:50:11,257 ERROR :x: [FATAL AUTHORING ERROR] "Selector to feature mismatch" authoring error for bot named: "Checkin Bot"" at message_index: "9" the bot should be should be deacivated until this issue has been resolved
2020-04-22 18:51:48,071 ERROR :x: [FATAL AUTHORING ERROR] "Selector to feature mismatch" authoring error for bot named: "Checkin Bot"" at message_index: "9" the bot should be should be deacivated until this issue has been resolved
2020-04-22 18:52:57,257 ERROR :x: [FATAL AUTHORING ERROR] "Selector to feature mismatch" authoring error for bot named: "Checkin Bot"" at message_index: "9" the bot should be should be deacivated until this issue has been resolved
2020-04-22 18:54:50,889 ERROR :x: [FATAL AUTHORING ERROR] "Selector to feature mismatch" authoring error for bot named: "Checkin Bot"" at message_index: "9" the bot should be should be deacivated until this issue has been resolved
2020-04-22 18:57:49,820 ERROR :x: [FATAL AUTHORING ERROR] "Selector to feature mismatch" authoring error for bot named: "Checkin Bot"" at message_index: "9" the bot should be should be deacivated until this issue has been resolved
2020-04-22 18:58:15,968 ERROR :x: [FATAL AUTHORING ERROR] "Selector to feature mismatch" authoring error for bot named: "Checkin Bot"" at message_index: "9" the bot should be should be deacivated until this issue has been resolved
2020-04-22 19:01:32,832 ERROR :x: [FATAL AUTHORING ERROR] "Selector to feature mismatch" authoring error for bot named: "Checkin Bot"" at message_index: "9" the bot should be should be deacivated until this issue has been resolved
2020-04-22 19:10:26,553 ERROR :x: [FATAL AUTHORING ERROR] "Selector to feature mismatch" authoring error for bot named: "Checkin Bot"" at message_index: "9" the bot should be should be deacivated until this issue has been resolved
2020-04-22 19:17:26,064 ERROR :x: [FATAL AUTHORING ERROR] "Selector to feature mismatch possible feature from selector none , but given features at next index is no" authoring error for bot named: "Checkin Bot"" at message_index: "9" the bot should be should be deacivated until this issue has been resolved
2020-04-22 19:31:20,090 ERROR :x: [FATAL AUTHORING ERROR] Selector to feature mismatch. Possible feature from selector: none , but features given at next index is: no. This is an authoring error for bot named: "Checkin Bot"" at message_index: "9" the bot should be should be deacivated until this issue has been resolved
2020-04-28 18:18:44,231 ERROR :x: [FATAL AUTHORING ERROR] Multiple responses and random is not in the feature space. This is an authoring error for bot named: "Sir Laughs A Bot"" at message_index: "3" the bot should be should be deacivated until this issue has been resolved
2020-04-30 00:36:20,042 ERROR :loudspeaker: [FATAL ERROR]  File "/home/thierry/Desktop/stanford_pwbt/popbots-refactor/controllers/main.py", line 392, in dialog_flow_engine
    command,response_list,image,bot_name,reply_markup  = response_engine(session,user_id,user_message)
  File "/home/thierry/Desktop/stanford_pwbt/popbots-refactor/utils.py", line 66, in wrapper
    result = func(*args, **kwargs)
  File "/home/thierry/Desktop/stanford_pwbt/popbots-refactor/controllers/main.py", line 231, in response_engine
    bot_text,current_index,keyboard,triggers = get_bot_response(bot_user=bot_user,next_index=next_index,user_response=user_message,content_index=content_index,stressor_object=stressor)
  File "/home/thierry/Desktop/stanford_pwbt/popbots-refactor/utils.py", line 66, in wrapper
    result = func(*args, **kwargs)
  File "/home/thierry/Desktop/stanford_pwbt/popbots-refactor/controllers/message.py", line 286, in get_bot_response
    try:selected_feature,triggers,parsed_features= selector_to_feature_or_trigger(selectors=selectors_name,input_string=user_response)
  File "/home/thierry/Desktop/stanford_pwbt/popbots-refactor/controllers/message.py", line 184, in selector_to_feature_or_trigger
    feature,trigger,parsed_features = feature_selector_split(input_string,selector)
  File "/home/thierry/Desktop/stanford_pwbt/popbots-refactor/controllers/message.py", line 162, in feature_selector_split
    raise BaseException

2020-05-06 17:40:49,571 ERROR :loudspeaker: [FATAL ERROR]'NoneType' object has no attribute 'id'  File "/home/thierry/Desktop/stanford_pwbt/popbots-refactor/controllers/main.py", line 392, in dialog_flow_engine
    command,response_list,image,bot_name,reply_markup  = response_engine(session,user_id,user_message)
  File "/home/thierry/Desktop/stanford_pwbt/popbots-refactor/utils.py", line 66, in wrapper
    result = func(*args, **kwargs)
  File "/home/thierry/Desktop/stanford_pwbt/popbots-refactor/controllers/main.py", line 215, in response_engine
    content_index = session.query(ContentFinders).filter_by(user_id=bot_id,message_index = next_index).first().id

2020-05-06 18:19:39,580 ERROR :loudspeaker: [FATAL ERROR]Can't determine join between 'users' and 'messages'; tables have more than one foreign key constraint relationship between them. Please specify the 'onclause' of this join explicitly.  File "/home/thierry/Desktop/stanford_pwbt/popbots-refactor/controllers/main.py", line 396, in dialog_flow_engine
    command,response_list,image,bot_name,reply_markup  = response_engine(session,user_id,user_message)
  File "/home/thierry/Desktop/stanford_pwbt/popbots-refactor/utils.py", line 66, in wrapper
    result = func(*args, **kwargs)
  File "/home/thierry/Desktop/stanford_pwbt/popbots-refactor/controllers/main.py", line 367, in response_engine
    latest_bot = session.query(Users).join(Message).filter(Users.category_id==2,Users.name.contains('Bot'),Message.conversation_id == conversation.id).order_by(Message.id.desc()).first()
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/orm/query.py", line 2288, in join
    return self._join(
  File "<string>", line 2, in _join
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/orm/base.py", line 220, in generate
    fn(self, *args[1:], **kw)
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/orm/query.py", line 2471, in _join
    self._join_left_to_right(
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/orm/query.py", line 2547, in _join_left_to_right
    orm_join(
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/orm/util.py", line 1144, in join
    return _ORMJoin(left, right, onclause, isouter, full)
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/orm/util.py", line 1043, in __init__
    expression.Join.__init__(self, left, right, onclause, isouter, full)
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/sql/selectable.py", line 744, in __init__
    self.onclause = self._match_primaries(self.left, self.right)
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/sql/selectable.py", line 887, in _match_primaries
    return self._join_condition(left, right, a_subset=left_right)
  File "<string>", line 2, in _join_condition
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/util/deprecations.py", line 128, in warned
    return fn(*args, **kwargs)
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/sql/selectable.py", line 937, in _join_condition
    cls._joincond_trim_constraints(
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/sql/selectable.py", line 1050, in _joincond_trim_constraints
    raise exc.AmbiguousForeignKeysError(

2020-05-06 18:23:26,723 ERROR :loudspeaker: [FATAL ERROR]type object 'Message' has no attribute 'user_id'  File "/home/thierry/Desktop/stanford_pwbt/popbots-refactor/controllers/main.py", line 396, in dialog_flow_engine
    command,response_list,image,bot_name,reply_markup  = response_engine(session,user_id,user_message)
  File "/home/thierry/Desktop/stanford_pwbt/popbots-refactor/utils.py", line 66, in wrapper
    result = func(*args, **kwargs)
  File "/home/thierry/Desktop/stanford_pwbt/popbots-refactor/controllers/main.py", line 367, in response_engine
    latest_bot = session.query(Users).join(Message,on=Users.id==Message.user_id).filter(Users.category_id==2,Users.name.contains('Bot'),Message.conversation_id == conversation.id).order_by(Message.id.desc()).first()

2020-05-06 18:24:38,864 ERROR :loudspeaker: [FATAL ERROR]unknown arguments: on  File "/home/thierry/Desktop/stanford_pwbt/popbots-refactor/controllers/main.py", line 396, in dialog_flow_engine
    command,response_list,image,bot_name,reply_markup  = response_engine(session,user_id,user_message)
  File "/home/thierry/Desktop/stanford_pwbt/popbots-refactor/utils.py", line 66, in wrapper
    result = func(*args, **kwargs)
  File "/home/thierry/Desktop/stanford_pwbt/popbots-refactor/controllers/main.py", line 367, in response_engine
    latest_bot = session.query(Users).join(Message,on=Users.id==Message.sender_id).filter(Users.category_id==2,Users.name.contains('Bot'),Message.conversation_id == conversation.id).order_by(Message.id.desc()).first()
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/orm/query.py", line 2285, in join
    raise TypeError(

2020-05-06 18:26:29,665 ERROR :loudspeaker: [FATAL ERROR]entity  File "/home/thierry/Desktop/stanford_pwbt/popbots-refactor/controllers/main.py", line 396, in dialog_flow_engine
    command,response_list,image,bot_name,reply_markup  = response_engine(session,user_id,user_message)
  File "/home/thierry/Desktop/stanford_pwbt/popbots-refactor/utils.py", line 66, in wrapper
    result = func(*args, **kwargs)
  File "/home/thierry/Desktop/stanford_pwbt/popbots-refactor/controllers/main.py", line 367, in response_engine
    latest_bot = session.query(Users).join(Message.sender_id).filter(Users.category_id==2,Users.name.contains('Bot'),Message.conversation_id == conversation.id).order_by(Message.id.desc()).first()
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/orm/query.py", line 2288, in join
    return self._join(
  File "<string>", line 2, in _join
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/orm/base.py", line 220, in generate
    fn(self, *args[1:], **kw)
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/orm/query.py", line 2426, in _join
    right = onclause.property.entity
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/util/langhelpers.py", line 977, in __getattr__
    return self._fallback_getattr(key)
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/util/langhelpers.py", line 951, in _fallback_getattr
    raise AttributeError(key)

2020-05-06 18:27:41,224 ERROR :loudspeaker: [FATAL ERROR]'NoneType' object has no attribute 'name'  File "/home/thierry/Desktop/stanford_pwbt/popbots-refactor/controllers/main.py", line 396, in dialog_flow_engine
    command,response_list,image,bot_name,reply_markup  = response_engine(session,user_id,user_message)
  File "/home/thierry/Desktop/stanford_pwbt/popbots-refactor/utils.py", line 66, in wrapper
    result = func(*args, **kwargs)
  File "/home/thierry/Desktop/stanford_pwbt/popbots-refactor/controllers/main.py", line 369, in response_engine
    bot_name = latest_bot.name

2020-05-06 18:28:43,275 ERROR :loudspeaker: [FATAL ERROR]'NoneType' object has no attribute 'name'  File "/home/thierry/Desktop/stanford_pwbt/popbots-refactor/controllers/main.py", line 396, in dialog_flow_engine
    command,response_list,image,bot_name,reply_markup  = response_engine(session,user_id,user_message)
  File "/home/thierry/Desktop/stanford_pwbt/popbots-refactor/utils.py", line 66, in wrapper
    result = func(*args, **kwargs)
  File "/home/thierry/Desktop/stanford_pwbt/popbots-refactor/controllers/main.py", line 369, in response_engine
    bot_name = latest_bot.name

2020-05-06 18:30:23,840 ERROR :loudspeaker: [FATAL ERROR](psycopg2.errors.DatatypeMismatch) argument of NOT must be type boolean, not type integer
LINE 3: ...users.name NOT LIKE '%' || 'Bot' || '%') AND (NOT messages.c...
                                                             ^

[SQL: SELECT users.id AS users_id, users.name AS users_name, users.category_id AS users_category_id 
FROM users JOIN messages ON users.id = messages.sender_id 
WHERE users.category_id = %(category_id_1)s AND (users.name NOT LIKE '%%' || %(name_1)s || '%%') AND (NOT messages.conversation_id) = %(param_1)s 
 LIMIT %(param_2)s]
[parameters: {'category_id_1': 2, 'name_1': 'Bot', 'param_1': 63, 'param_2': 1}]
(Background on this error at: http://sqlalche.me/e/f405)  File "/home/thierry/Desktop/stanford_pwbt/popbots-refactor/controllers/main.py", line 396, in dialog_flow_engine
    command,response_list,image,bot_name,reply_markup  = response_engine(session,user_id,user_message)
  File "/home/thierry/Desktop/stanford_pwbt/popbots-refactor/utils.py", line 66, in wrapper
    result = func(*args, **kwargs)
  File "/home/thierry/Desktop/stanford_pwbt/popbots-refactor/controllers/main.py", line 367, in response_engine
    latest_bot = session.query(Users).join(Message,Users.id==Message.sender_id).filter(Users.category_id==2,~Users.name.contains('Bot'),~Message.conversation_id == conversation.id).first()#.order_by(Message.id.desc()).first()
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/orm/query.py", line 3298, in first
    ret = list(self[0:1])
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/orm/query.py", line 3076, in __getitem__
    return list(res)
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/orm/query.py", line 3403, in __iter__
    return self._execute_and_instances(context)
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/orm/query.py", line 3428, in _execute_and_instances
    result = conn.execute(querycontext.statement, self._params)
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 984, in execute
    return meth(self, multiparams, params)
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/sql/elements.py", line 293, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 1097, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 1287, in _execute_context
    self._handle_dbapi_exception(
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 1481, in _handle_dbapi_exception
    util.raise_(
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/util/compat.py", line 178, in raise_
    raise exception
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 1247, in _execute_context
    self.dialect.do_execute(
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/engine/default.py", line 588, in do_execute
    cursor.execute(statement, parameters)

2020-05-06 18:31:36,038 ERROR :loudspeaker: [FATAL ERROR]'NoneType' object has no attribute 'name'  File "/home/thierry/Desktop/stanford_pwbt/popbots-refactor/controllers/main.py", line 396, in dialog_flow_engine
    command,response_list,image,bot_name,reply_markup  = response_engine(session,user_id,user_message)
  File "/home/thierry/Desktop/stanford_pwbt/popbots-refactor/utils.py", line 66, in wrapper
    result = func(*args, **kwargs)
  File "/home/thierry/Desktop/stanford_pwbt/popbots-refactor/controllers/main.py", line 369, in response_engine
    bot_name = latest_bot.name

2020-05-06 18:39:19,002 ERROR :x: [FATAL AUTHORING ERROR] Multiple responses and random is not in the feature space. This is an authoring error for bot named: "Sherlock Bot"" at message_index: "7" the bot should be should be deacivated until this issue has been resolved
2020-05-08 13:02:24,739 ERROR :loudspeaker: [FATAL ERROR]'NoneType' object is not subscriptable  File "/home/thierry/Desktop/stanford_pwbt/popbots-refactor/controllers/main.py", line 437, in dialog_flow_engine
    command,response_list,image,bot_name,reply_markup  = response_engine(session,user_id,user_message)
  File "/home/thierry/Desktop/stanford_pwbt/popbots-refactor/utils.py", line 66, in wrapper
    result = func(*args, **kwargs)
  File "/home/thierry/Desktop/stanford_pwbt/popbots-refactor/controllers/main.py", line 263, in response_engine
    bot_text,current_index,keyboard,triggers = get_bot_response(bot_user=bot_user,next_index=next_index,user_response=user_message,content_index=content_index,stressor_object=stressor)
  File "/home/thierry/Desktop/stanford_pwbt/popbots-refactor/utils.py", line 66, in wrapper
    result = func(*args, **kwargs)
  File "/home/thierry/Desktop/stanford_pwbt/popbots-refactor/controllers/message.py", line 319, in get_bot_response
    log('DEBUG',fetch_synonyms_regex('greeting'))
  File "/home/thierry/Desktop/stanford_pwbt/popbots-refactor/controllers/message.py", line 78, in fetch_synonyms_regex
    synonyms,regex = synonyms_regexes['synonyms'],synonyms_regexes['regex']

2020-05-08 13:04:20,125 ERROR :loudspeaker: [FATAL ERROR]'NoneType' object is not subscriptable  File "/home/thierry/Desktop/stanford_pwbt/popbots-refactor/controllers/main.py", line 437, in dialog_flow_engine
    command,response_list,image,bot_name,reply_markup  = response_engine(session,user_id,user_message)
  File "/home/thierry/Desktop/stanford_pwbt/popbots-refactor/utils.py", line 66, in wrapper
    result = func(*args, **kwargs)
  File "/home/thierry/Desktop/stanford_pwbt/popbots-refactor/controllers/main.py", line 263, in response_engine
    bot_text,current_index,keyboard,triggers = get_bot_response(bot_user=bot_user,next_index=next_index,user_response=user_message,content_index=content_index,stressor_object=stressor)
  File "/home/thierry/Desktop/stanford_pwbt/popbots-refactor/utils.py", line 66, in wrapper
    result = func(*args, **kwargs)
  File "/home/thierry/Desktop/stanford_pwbt/popbots-refactor/controllers/message.py", line 319, in get_bot_response
    log('DEBUG',fetch_synonyms_regex('greeting'))
  File "/home/thierry/Desktop/stanford_pwbt/popbots-refactor/controllers/message.py", line 78, in fetch_synonyms_regex
    synonyms,regex = synonyms_regexes['synonyms'],synonyms_regexes['regex']

2020-05-08 13:06:19,102 ERROR :loudspeaker: [FATAL ERROR]'NoneType' object is not subscriptable  File "/home/thierry/Desktop/stanford_pwbt/popbots-refactor/controllers/main.py", line 437, in dialog_flow_engine
    command,response_list,image,bot_name,reply_markup  = response_engine(session,user_id,user_message)
  File "/home/thierry/Desktop/stanford_pwbt/popbots-refactor/utils.py", line 66, in wrapper
    result = func(*args, **kwargs)
  File "/home/thierry/Desktop/stanford_pwbt/popbots-refactor/controllers/main.py", line 263, in response_engine
    bot_text,current_index,keyboard,triggers = get_bot_response(bot_user=bot_user,next_index=next_index,user_response=user_message,content_index=content_index,stressor_object=stressor)
  File "/home/thierry/Desktop/stanford_pwbt/popbots-refactor/utils.py", line 66, in wrapper
    result = func(*args, **kwargs)
  File "/home/thierry/Desktop/stanford_pwbt/popbots-refactor/controllers/message.py", line 320, in get_bot_response
    log('DEBUG',fetch_synonyms_regex('greeting'))
  File "/home/thierry/Desktop/stanford_pwbt/popbots-refactor/controllers/message.py", line 78, in fetch_synonyms_regex
    synonyms = synonyms_regexes['synonyms']

2020-05-08 13:07:26,083 ERROR :loudspeaker: [FATAL ERROR]'NoneType' object is not subscriptable  File "/home/thierry/Desktop/stanford_pwbt/popbots-refactor/controllers/main.py", line 437, in dialog_flow_engine
    command,response_list,image,bot_name,reply_markup  = response_engine(session,user_id,user_message)
  File "/home/thierry/Desktop/stanford_pwbt/popbots-refactor/utils.py", line 66, in wrapper
    result = func(*args, **kwargs)
  File "/home/thierry/Desktop/stanford_pwbt/popbots-refactor/controllers/main.py", line 263, in response_engine
    bot_text,current_index,keyboard,triggers = get_bot_response(bot_user=bot_user,next_index=next_index,user_response=user_message,content_index=content_index,stressor_object=stressor)
  File "/home/thierry/Desktop/stanford_pwbt/popbots-refactor/utils.py", line 66, in wrapper
    result = func(*args, **kwargs)
  File "/home/thierry/Desktop/stanford_pwbt/popbots-refactor/controllers/message.py", line 320, in get_bot_response
    log('DEBUG',fetch_synonyms_regex('greeting'))
  File "/home/thierry/Desktop/stanford_pwbt/popbots-refactor/controllers/message.py", line 78, in fetch_synonyms_regex
    synonyms = synonyms_regexes['synonyms']

2020-05-08 13:10:18,491 ERROR :loudspeaker: [FATAL ERROR]'NoneType' object is not subscriptable  File "/home/thierry/Desktop/stanford_pwbt/popbots-refactor/controllers/main.py", line 437, in dialog_flow_engine
    command,response_list,image,bot_name,reply_markup  = response_engine(session,user_id,user_message)
  File "/home/thierry/Desktop/stanford_pwbt/popbots-refactor/utils.py", line 66, in wrapper
    result = func(*args, **kwargs)
  File "/home/thierry/Desktop/stanford_pwbt/popbots-refactor/controllers/main.py", line 263, in response_engine
    bot_text,current_index,keyboard,triggers = get_bot_response(bot_user=bot_user,next_index=next_index,user_response=user_message,content_index=content_index,stressor_object=stressor)
  File "/home/thierry/Desktop/stanford_pwbt/popbots-refactor/utils.py", line 66, in wrapper
    result = func(*args, **kwargs)
  File "/home/thierry/Desktop/stanford_pwbt/popbots-refactor/controllers/message.py", line 320, in get_bot_response
    log('DEBUG',fetch_synonyms_regex('greeting'))
  File "/home/thierry/Desktop/stanford_pwbt/popbots-refactor/controllers/message.py", line 78, in fetch_synonyms_regex
    synonyms = synonyms_regexes['synonyms']

2020-05-08 13:14:28,683 ERROR :loudspeaker: [FATAL ERROR]list indices must be integers or slices, not str  File "/home/thierry/Desktop/stanford_pwbt/popbots-refactor/controllers/main.py", line 437, in dialog_flow_engine
    command,response_list,image,bot_name,reply_markup  = response_engine(session,user_id,user_message)
  File "/home/thierry/Desktop/stanford_pwbt/popbots-refactor/utils.py", line 66, in wrapper
    result = func(*args, **kwargs)
  File "/home/thierry/Desktop/stanford_pwbt/popbots-refactor/controllers/main.py", line 263, in response_engine
    bot_text,current_index,keyboard,triggers = get_bot_response(bot_user=bot_user,next_index=next_index,user_response=user_message,content_index=content_index,stressor_object=stressor)
  File "/home/thierry/Desktop/stanford_pwbt/popbots-refactor/utils.py", line 66, in wrapper
    result = func(*args, **kwargs)
  File "/home/thierry/Desktop/stanford_pwbt/popbots-refactor/controllers/message.py", line 320, in get_bot_response
    log('DEBUG',fetch_synonyms_regex('greeting'))
  File "/home/thierry/Desktop/stanford_pwbt/popbots-refactor/controllers/message.py", line 78, in fetch_synonyms_regex
    synonyms = synonyms_regexes['synonyms']

2020-05-08 16:45:55,445 ERROR :loudspeaker: [FATAL ERROR](psycopg2.errors.AdminShutdown) terminating connection due to administrator command
server closed the connection unexpectedly
	This probably means the server terminated abnormally
	before or while processing the request.

[SQL: SELECT users.id AS users_id, users.name AS users_name, users.category_id AS users_category_id 
FROM users 
WHERE users.name = %(name_1)s 
 LIMIT %(param_1)s]
[parameters: {'name_1': 'Affirmation Module', 'param_1': 1}]
(Background on this error at: http://sqlalche.me/e/e3q8)  File "/home/thierry/Desktop/stanford_pwbt/popbots-refactor/controllers/main.py", line 437, in dialog_flow_engine
    command,response_list,image,bot_name,reply_markup  = response_engine(session,user_id,user_message)
  File "/home/thierry/Desktop/stanford_pwbt/popbots-refactor/utils.py", line 66, in wrapper
    result = func(*args, **kwargs)
  File "/home/thierry/Desktop/stanford_pwbt/popbots-refactor/controllers/main.py", line 287, in response_engine
    current_index,bot_id,content_index = change_bot(session,current_bot_id=bot_id,destination_bot_name=next_bot_name)
  File "/home/thierry/Desktop/stanford_pwbt/popbots-refactor/controllers/main.py", line 54, in change_bot
    bot_id = get_user_id_from_name(destination_bot_name)
  File "/home/thierry/Desktop/stanford_pwbt/popbots-refactor/models/utils.py", line 10, in get_user_id_from_name
    bot = session.query(Users).filter_by(name=name).first()
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/orm/query.py", line 3298, in first
    ret = list(self[0:1])
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/orm/query.py", line 3076, in __getitem__
    return list(res)
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/orm/query.py", line 3403, in __iter__
    return self._execute_and_instances(context)
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/orm/query.py", line 3428, in _execute_and_instances
    result = conn.execute(querycontext.statement, self._params)
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 984, in execute
    return meth(self, multiparams, params)
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/sql/elements.py", line 293, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 1097, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 1287, in _execute_context
    self._handle_dbapi_exception(
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 1481, in _handle_dbapi_exception
    util.raise_(
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/util/compat.py", line 178, in raise_
    raise exception
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 1247, in _execute_context
    self.dialect.do_execute(
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/engine/default.py", line 588, in do_execute
    cursor.execute(statement, parameters)

2020-05-08 16:46:23,557 ERROR :loudspeaker: [FATAL ERROR](sqlalchemy.exc.InvalidRequestError) Can't reconnect until invalid transaction is rolled back
[SQL: SELECT users.id AS users_id, users.name AS users_name, users.category_id AS users_category_id 
FROM users 
WHERE users.name = %(name_1)s 
 LIMIT %(param_1)s]
[parameters: [immutabledict({})]]  File "/home/thierry/Desktop/stanford_pwbt/popbots-refactor/controllers/main.py", line 437, in dialog_flow_engine
    command,response_list,image,bot_name,reply_markup  = response_engine(session,user_id,user_message)
  File "/home/thierry/Desktop/stanford_pwbt/popbots-refactor/utils.py", line 66, in wrapper
    result = func(*args, **kwargs)
  File "/home/thierry/Desktop/stanford_pwbt/popbots-refactor/controllers/main.py", line 220, in response_engine
    bot_id = get_user_id_from_name("Greeting Module")
  File "/home/thierry/Desktop/stanford_pwbt/popbots-refactor/models/utils.py", line 10, in get_user_id_from_name
    bot = session.query(Users).filter_by(name=name).first()
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/orm/query.py", line 3298, in first
    ret = list(self[0:1])
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/orm/query.py", line 3076, in __getitem__
    return list(res)
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/orm/query.py", line 3403, in __iter__
    return self._execute_and_instances(context)
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/orm/query.py", line 3428, in _execute_and_instances
    result = conn.execute(querycontext.statement, self._params)
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 984, in execute
    return meth(self, multiparams, params)
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/sql/elements.py", line 293, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 1097, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 1177, in _execute_context
    self._handle_dbapi_exception(
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 1481, in _handle_dbapi_exception
    util.raise_(
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/util/compat.py", line 178, in raise_
    raise exception
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 1173, in _execute_context
    conn = self._revalidate_connection()
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 456, in _revalidate_connection
    raise exc.InvalidRequestError(

2020-05-08 16:53:47,617 ERROR :loudspeaker: [FATAL ERROR](psycopg2.errors.AdminShutdown) terminating connection due to administrator command
server closed the connection unexpectedly
	This probably means the server terminated abnormally
	before or while processing the request.

[SQL: SELECT users.id AS users_id, users.name AS users_name, users.category_id AS users_category_id 
FROM users 
WHERE users.name = %(name_1)s 
 LIMIT %(param_1)s]
[parameters: {'name_1': 'Affirmation Module', 'param_1': 1}]
(Background on this error at: http://sqlalche.me/e/e3q8)  File "/home/thierry/Desktop/stanford_pwbt/popbots-refactor/controllers/main.py", line 437, in dialog_flow_engine
    command,response_list,image,bot_name,reply_markup  = response_engine(session,user_id,user_message)
  File "/home/thierry/Desktop/stanford_pwbt/popbots-refactor/utils.py", line 66, in wrapper
    result = func(*args, **kwargs)
  File "/home/thierry/Desktop/stanford_pwbt/popbots-refactor/controllers/main.py", line 287, in response_engine
    current_index,bot_id,content_index = change_bot(session,current_bot_id=bot_id,destination_bot_name=next_bot_name)
  File "/home/thierry/Desktop/stanford_pwbt/popbots-refactor/controllers/main.py", line 54, in change_bot
    bot_id = get_user_id_from_name(destination_bot_name)
  File "/home/thierry/Desktop/stanford_pwbt/popbots-refactor/models/utils.py", line 10, in get_user_id_from_name
    bot = session.query(Users).filter_by(name=name).first()
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/orm/query.py", line 3298, in first
    ret = list(self[0:1])
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/orm/query.py", line 3076, in __getitem__
    return list(res)
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/orm/query.py", line 3403, in __iter__
    return self._execute_and_instances(context)
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/orm/query.py", line 3428, in _execute_and_instances
    result = conn.execute(querycontext.statement, self._params)
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 984, in execute
    return meth(self, multiparams, params)
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/sql/elements.py", line 293, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 1097, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 1287, in _execute_context
    self._handle_dbapi_exception(
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 1481, in _handle_dbapi_exception
    util.raise_(
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/util/compat.py", line 178, in raise_
    raise exception
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 1247, in _execute_context
    self.dialect.do_execute(
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/engine/default.py", line 588, in do_execute
    cursor.execute(statement, parameters)

2020-05-08 16:54:28,187 ERROR :loudspeaker: [FATAL ERROR](sqlalchemy.exc.InvalidRequestError) Can't reconnect until invalid transaction is rolled back
[SQL: SELECT users.id AS users_id, users.name AS users_name, users.category_id AS users_category_id 
FROM users 
WHERE users.name = %(name_1)s 
 LIMIT %(param_1)s]
[parameters: [immutabledict({})]]  File "/home/thierry/Desktop/stanford_pwbt/popbots-refactor/controllers/main.py", line 437, in dialog_flow_engine
    command,response_list,image,bot_name,reply_markup  = response_engine(session,user_id,user_message)
  File "/home/thierry/Desktop/stanford_pwbt/popbots-refactor/utils.py", line 66, in wrapper
    result = func(*args, **kwargs)
  File "/home/thierry/Desktop/stanford_pwbt/popbots-refactor/controllers/main.py", line 196, in response_engine
    bot_id = get_user_id_from_name("Greeting Module")
  File "/home/thierry/Desktop/stanford_pwbt/popbots-refactor/models/utils.py", line 10, in get_user_id_from_name
    bot = session.query(Users).filter_by(name=name).first()
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/orm/query.py", line 3298, in first
    ret = list(self[0:1])
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/orm/query.py", line 3076, in __getitem__
    return list(res)
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/orm/query.py", line 3403, in __iter__
    return self._execute_and_instances(context)
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/orm/query.py", line 3428, in _execute_and_instances
    result = conn.execute(querycontext.statement, self._params)
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 984, in execute
    return meth(self, multiparams, params)
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/sql/elements.py", line 293, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 1097, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 1177, in _execute_context
    self._handle_dbapi_exception(
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 1481, in _handle_dbapi_exception
    util.raise_(
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/util/compat.py", line 178, in raise_
    raise exception
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 1173, in _execute_context
    conn = self._revalidate_connection()
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 456, in _revalidate_connection
    raise exc.InvalidRequestError(

2020-05-08 17:02:29,886 ERROR :loudspeaker: [FATAL ERROR](psycopg2.errors.AdminShutdown) terminating connection due to administrator command
server closed the connection unexpectedly
	This probably means the server terminated abnormally
	before or while processing the request.

[SQL: SELECT users.id AS users_id, users.name AS users_name, users.category_id AS users_category_id 
FROM users 
WHERE users.name = %(name_1)s 
 LIMIT %(param_1)s]
[parameters: {'name_1': 'Greeting Module', 'param_1': 1}]
(Background on this error at: http://sqlalche.me/e/e3q8)  File "/home/thierry/Desktop/stanford_pwbt/popbots-refactor/controllers/main.py", line 437, in dialog_flow_engine
    command,response_list,image,bot_name,reply_markup  = response_engine(session,user_id,user_message)
  File "/home/thierry/Desktop/stanford_pwbt/popbots-refactor/utils.py", line 66, in wrapper
    result = func(*args, **kwargs)
  File "/home/thierry/Desktop/stanford_pwbt/popbots-refactor/controllers/main.py", line 220, in response_engine
    bot_id = get_user_id_from_name("Greeting Module")
  File "/home/thierry/Desktop/stanford_pwbt/popbots-refactor/models/utils.py", line 10, in get_user_id_from_name
    bot = session.query(Users).filter_by(name=name).first()
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/orm/query.py", line 3298, in first
    ret = list(self[0:1])
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/orm/query.py", line 3076, in __getitem__
    return list(res)
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/orm/query.py", line 3403, in __iter__
    return self._execute_and_instances(context)
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/orm/query.py", line 3428, in _execute_and_instances
    result = conn.execute(querycontext.statement, self._params)
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 984, in execute
    return meth(self, multiparams, params)
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/sql/elements.py", line 293, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 1097, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 1287, in _execute_context
    self._handle_dbapi_exception(
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 1481, in _handle_dbapi_exception
    util.raise_(
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/util/compat.py", line 178, in raise_
    raise exception
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 1247, in _execute_context
    self.dialect.do_execute(
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/engine/default.py", line 588, in do_execute
    cursor.execute(statement, parameters)

2020-05-08 17:02:55,314 ERROR :loudspeaker: [FATAL ERROR](sqlalchemy.exc.InvalidRequestError) Can't reconnect until invalid transaction is rolled back
[SQL: SELECT users.id AS users_id, users.name AS users_name, users.category_id AS users_category_id 
FROM users 
WHERE users.name = %(name_1)s 
 LIMIT %(param_1)s]
[parameters: [immutabledict({})]]  File "/home/thierry/Desktop/stanford_pwbt/popbots-refactor/controllers/main.py", line 437, in dialog_flow_engine
    command,response_list,image,bot_name,reply_markup  = response_engine(session,user_id,user_message)
  File "/home/thierry/Desktop/stanford_pwbt/popbots-refactor/utils.py", line 66, in wrapper
    result = func(*args, **kwargs)
  File "/home/thierry/Desktop/stanford_pwbt/popbots-refactor/controllers/main.py", line 196, in response_engine
    bot_id = get_user_id_from_name("Greeting Module")
  File "/home/thierry/Desktop/stanford_pwbt/popbots-refactor/models/utils.py", line 10, in get_user_id_from_name
    bot = session.query(Users).filter_by(name=name).first()
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/orm/query.py", line 3298, in first
    ret = list(self[0:1])
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/orm/query.py", line 3076, in __getitem__
    return list(res)
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/orm/query.py", line 3403, in __iter__
    return self._execute_and_instances(context)
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/orm/query.py", line 3428, in _execute_and_instances
    result = conn.execute(querycontext.statement, self._params)
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 984, in execute
    return meth(self, multiparams, params)
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/sql/elements.py", line 293, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 1097, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 1177, in _execute_context
    self._handle_dbapi_exception(
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 1481, in _handle_dbapi_exception
    util.raise_(
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/util/compat.py", line 178, in raise_
    raise exception
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 1173, in _execute_context
    conn = self._revalidate_connection()
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 456, in _revalidate_connection
    raise exc.InvalidRequestError(

2020-05-08 17:04:33,245 ERROR :loudspeaker: [FATAL ERROR](psycopg2.errors.AdminShutdown) terminating connection due to administrator command
server closed the connection unexpectedly
	This probably means the server terminated abnormally
	before or while processing the request.

[SQL: SELECT users.id AS users_id, users.name AS users_name, users.category_id AS users_category_id 
FROM users 
WHERE users.name = %(name_1)s 
 LIMIT %(param_1)s]
[parameters: {'name_1': 'Affirmation Module', 'param_1': 1}]
(Background on this error at: http://sqlalche.me/e/e3q8)  File "/home/thierry/Desktop/stanford_pwbt/popbots-refactor/controllers/main.py", line 437, in dialog_flow_engine
    command,response_list,image,bot_name,reply_markup  = response_engine(session,user_id,user_message)
  File "/home/thierry/Desktop/stanford_pwbt/popbots-refactor/utils.py", line 66, in wrapper
    result = func(*args, **kwargs)
  File "/home/thierry/Desktop/stanford_pwbt/popbots-refactor/controllers/main.py", line 287, in response_engine
    current_index,bot_id,content_index = change_bot(session,current_bot_id=bot_id,destination_bot_name=next_bot_name)
  File "/home/thierry/Desktop/stanford_pwbt/popbots-refactor/controllers/main.py", line 54, in change_bot
    bot_id = get_user_id_from_name(destination_bot_name)
  File "/home/thierry/Desktop/stanford_pwbt/popbots-refactor/models/utils.py", line 10, in get_user_id_from_name
    bot = session.query(Users).filter_by(name=name).first()
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/orm/query.py", line 3298, in first
    ret = list(self[0:1])
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/orm/query.py", line 3076, in __getitem__
    return list(res)
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/orm/query.py", line 3403, in __iter__
    return self._execute_and_instances(context)
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/orm/query.py", line 3428, in _execute_and_instances
    result = conn.execute(querycontext.statement, self._params)
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 984, in execute
    return meth(self, multiparams, params)
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/sql/elements.py", line 293, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 1097, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 1287, in _execute_context
    self._handle_dbapi_exception(
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 1481, in _handle_dbapi_exception
    util.raise_(
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/util/compat.py", line 178, in raise_
    raise exception
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 1247, in _execute_context
    self.dialect.do_execute(
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/engine/default.py", line 588, in do_execute
    cursor.execute(statement, parameters)

2020-05-08 17:04:49,392 ERROR :loudspeaker: [FATAL ERROR](sqlalchemy.exc.InvalidRequestError) Can't reconnect until invalid transaction is rolled back
[SQL: SELECT users.id AS users_id, users.name AS users_name, users.category_id AS users_category_id 
FROM users 
WHERE users.name = %(name_1)s 
 LIMIT %(param_1)s]
[parameters: [immutabledict({})]]  File "/home/thierry/Desktop/stanford_pwbt/popbots-refactor/controllers/main.py", line 437, in dialog_flow_engine
    command,response_list,image,bot_name,reply_markup  = response_engine(session,user_id,user_message)
  File "/home/thierry/Desktop/stanford_pwbt/popbots-refactor/utils.py", line 66, in wrapper
    result = func(*args, **kwargs)
  File "/home/thierry/Desktop/stanford_pwbt/popbots-refactor/controllers/main.py", line 196, in response_engine
    bot_id = get_user_id_from_name("Greeting Module")
  File "/home/thierry/Desktop/stanford_pwbt/popbots-refactor/models/utils.py", line 10, in get_user_id_from_name
    bot = session.query(Users).filter_by(name=name).first()
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/orm/query.py", line 3298, in first
    ret = list(self[0:1])
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/orm/query.py", line 3076, in __getitem__
    return list(res)
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/orm/query.py", line 3403, in __iter__
    return self._execute_and_instances(context)
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/orm/query.py", line 3428, in _execute_and_instances
    result = conn.execute(querycontext.statement, self._params)
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 984, in execute
    return meth(self, multiparams, params)
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/sql/elements.py", line 293, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 1097, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 1177, in _execute_context
    self._handle_dbapi_exception(
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 1481, in _handle_dbapi_exception
    util.raise_(
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/util/compat.py", line 178, in raise_
    raise exception
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 1173, in _execute_context
    conn = self._revalidate_connection()
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 456, in _revalidate_connection
    raise exc.InvalidRequestError(

2020-05-08 17:07:04,079 ERROR :loudspeaker: [FATAL ERROR](psycopg2.errors.AdminShutdown) terminating connection due to administrator command
server closed the connection unexpectedly
	This probably means the server terminated abnormally
	before or while processing the request.

[SQL: SELECT users.id AS users_id, users.name AS users_name, users.category_id AS users_category_id 
FROM users 
WHERE users.name = %(name_1)s 
 LIMIT %(param_1)s]
[parameters: {'name_1': 'Affirmation Module', 'param_1': 1}]
(Background on this error at: http://sqlalche.me/e/e3q8)  File "/home/thierry/Desktop/stanford_pwbt/popbots-refactor/controllers/main.py", line 437, in dialog_flow_engine
    command,response_list,image,bot_name,reply_markup  = response_engine(session,user_id,user_message)
  File "/home/thierry/Desktop/stanford_pwbt/popbots-refactor/utils.py", line 66, in wrapper
    result = func(*args, **kwargs)
  File "/home/thierry/Desktop/stanford_pwbt/popbots-refactor/controllers/main.py", line 287, in response_engine
    current_index,bot_id,content_index = change_bot(session,current_bot_id=bot_id,destination_bot_name=next_bot_name)
  File "/home/thierry/Desktop/stanford_pwbt/popbots-refactor/controllers/main.py", line 54, in change_bot
    bot_id = get_user_id_from_name(destination_bot_name)
  File "/home/thierry/Desktop/stanford_pwbt/popbots-refactor/models/utils.py", line 10, in get_user_id_from_name
    bot = session.query(Users).filter_by(name=name).first()
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/orm/query.py", line 3298, in first
    ret = list(self[0:1])
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/orm/query.py", line 3076, in __getitem__
    return list(res)
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/orm/query.py", line 3403, in __iter__
    return self._execute_and_instances(context)
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/orm/query.py", line 3428, in _execute_and_instances
    result = conn.execute(querycontext.statement, self._params)
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 984, in execute
    return meth(self, multiparams, params)
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/sql/elements.py", line 293, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 1097, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 1287, in _execute_context
    self._handle_dbapi_exception(
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 1481, in _handle_dbapi_exception
    util.raise_(
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/util/compat.py", line 178, in raise_
    raise exception
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 1247, in _execute_context
    self.dialect.do_execute(
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/engine/default.py", line 588, in do_execute
    cursor.execute(statement, parameters)

2020-05-08 17:09:00,791 ERROR :loudspeaker: [FATAL ERROR](psycopg2.errors.AdminShutdown) terminating connection due to administrator command
server closed the connection unexpectedly
	This probably means the server terminated abnormally
	before or while processing the request.

[SQL: SELECT users.id AS users_id, users.name AS users_name, users.category_id AS users_category_id 
FROM users 
WHERE users.name = %(name_1)s 
 LIMIT %(param_1)s]
[parameters: {'name_1': 'Affirmation Module', 'param_1': 1}]
(Background on this error at: http://sqlalche.me/e/e3q8)  File "/home/thierry/Desktop/stanford_pwbt/popbots-refactor/controllers/main.py", line 437, in dialog_flow_engine
    command,response_list,image,bot_name,reply_markup  = response_engine(session,user_id,user_message)
  File "/home/thierry/Desktop/stanford_pwbt/popbots-refactor/utils.py", line 66, in wrapper
    result = func(*args, **kwargs)
  File "/home/thierry/Desktop/stanford_pwbt/popbots-refactor/controllers/main.py", line 287, in response_engine
    current_index,bot_id,content_index = change_bot(session,current_bot_id=bot_id,destination_bot_name=next_bot_name)
  File "/home/thierry/Desktop/stanford_pwbt/popbots-refactor/controllers/main.py", line 54, in change_bot
    bot_id = get_user_id_from_name(destination_bot_name)
  File "/home/thierry/Desktop/stanford_pwbt/popbots-refactor/models/utils.py", line 10, in get_user_id_from_name
    bot = session.query(Users).filter_by(name=name).first()
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/orm/query.py", line 3298, in first
    ret = list(self[0:1])
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/orm/query.py", line 3076, in __getitem__
    return list(res)
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/orm/query.py", line 3403, in __iter__
    return self._execute_and_instances(context)
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/orm/query.py", line 3428, in _execute_and_instances
    result = conn.execute(querycontext.statement, self._params)
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 984, in execute
    return meth(self, multiparams, params)
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/sql/elements.py", line 293, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 1097, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 1287, in _execute_context
    self._handle_dbapi_exception(
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 1481, in _handle_dbapi_exception
    util.raise_(
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/util/compat.py", line 178, in raise_
    raise exception
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 1247, in _execute_context
    self.dialect.do_execute(
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/engine/default.py", line 588, in do_execute
    cursor.execute(statement, parameters)

2020-05-08 17:10:57,391 ERROR :loudspeaker: [FATAL ERROR](sqlalchemy.exc.InvalidRequestError) Can't reconnect until invalid transaction is rolled back
[SQL: SELECT users.id AS users_id, users.name AS users_name, users.category_id AS users_category_id 
FROM users 
WHERE users.name = %(name_1)s 
 LIMIT %(param_1)s]
[parameters: [immutabledict({})]]  File "/home/thierry/Desktop/stanford_pwbt/popbots-refactor/controllers/main.py", line 437, in dialog_flow_engine
    command,response_list,image,bot_name,reply_markup  = response_engine(session,user_id,user_message)
  File "/home/thierry/Desktop/stanford_pwbt/popbots-refactor/utils.py", line 66, in wrapper
    result = func(*args, **kwargs)
  File "/home/thierry/Desktop/stanford_pwbt/popbots-refactor/controllers/main.py", line 196, in response_engine
    bot_id = get_user_id_from_name("Greeting Module")
  File "/home/thierry/Desktop/stanford_pwbt/popbots-refactor/models/utils.py", line 10, in get_user_id_from_name
    bot = session.query(Users).filter_by(name=name).first()
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/orm/query.py", line 3298, in first
    ret = list(self[0:1])
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/orm/query.py", line 3076, in __getitem__
    return list(res)
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/orm/query.py", line 3403, in __iter__
    return self._execute_and_instances(context)
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/orm/query.py", line 3428, in _execute_and_instances
    result = conn.execute(querycontext.statement, self._params)
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 984, in execute
    return meth(self, multiparams, params)
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/sql/elements.py", line 293, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 1097, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 1177, in _execute_context
    self._handle_dbapi_exception(
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 1481, in _handle_dbapi_exception
    util.raise_(
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/util/compat.py", line 178, in raise_
    raise exception
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 1173, in _execute_context
    conn = self._revalidate_connection()
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 456, in _revalidate_connection
    raise exc.InvalidRequestError(

2020-05-08 17:12:09,210 ERROR :loudspeaker: [FATAL BASE ERROR]unbalanced parenthesis at position 81  File "/home/thierry/Desktop/stanford_pwbt/popbots-refactor/controllers/main.py", line 437, in dialog_flow_engine
    command,response_list,image,bot_name,reply_markup  = response_engine(session,user_id,user_message)
  File "/home/thierry/Desktop/stanford_pwbt/popbots-refactor/utils.py", line 66, in wrapper
    result = func(*args, **kwargs)
  File "/home/thierry/Desktop/stanford_pwbt/popbots-refactor/controllers/main.py", line 263, in response_engine
    bot_text,current_index,keyboard,triggers = get_bot_response(bot_user=bot_user,next_index=next_index,user_response=user_message,content_index=content_index,stressor_object=stressor)
  File "/home/thierry/Desktop/stanford_pwbt/popbots-refactor/utils.py", line 66, in wrapper
    result = func(*args, **kwargs)
  File "/home/thierry/Desktop/stanford_pwbt/popbots-refactor/controllers/message.py", line 300, in get_bot_response
    try:selected_feature,triggers,parsed_features= selector_to_feature_or_trigger(selectors=selectors_name,input_string=user_response)
  File "/home/thierry/Desktop/stanford_pwbt/popbots-refactor/controllers/message.py", line 205, in selector_to_feature_or_trigger
    feature,trigger,parsed_features = feature_selector_split(input_string,selector)
  File "/home/thierry/Desktop/stanford_pwbt/popbots-refactor/controllers/message.py", line 147, in feature_selector_split
    all_selectors.append(return_feature(input_string,fea,alternative))
  File "/home/thierry/Desktop/stanford_pwbt/popbots-refactor/controllers/message.py", line 110, in return_feature
    if find_keyword(input_string,synonyms) or re.match(rf"{regex}",input_string):#and (len(input_string.split(" ")) <= 5 and len(input_string) <= 25)): # the second condition is to make sure that the no is not contained in a long sentence
  File "/usr/lib/python3.8/re.py", line 189, in match
    return _compile(pattern, flags).match(string)
  File "/usr/lib/python3.8/re.py", line 302, in _compile
    p = sre_compile.compile(pattern, flags)
  File "/usr/lib/python3.8/sre_compile.py", line 764, in compile
    p = sre_parse.parse(p, flags)
  File "/usr/lib/python3.8/sre_parse.py", line 962, in parse
    raise source.error("unbalanced parenthesis")

2020-05-08 17:15:42,094 ERROR :x: [FATAL AUTHORING ERROR] Selector to feature mismatch. Possible feature from selector: else and greeting , but features given at next index is: none. This is an authoring error for bot named: "Greeting Module"" at message_index: "4" the bot should be should be deacivated until this issue has been resolved
2020-05-08 17:16:34,616 ERROR :loudspeaker: [FATAL BASE ERROR](psycopg2.errors.AdminShutdown) terminating connection due to administrator command
server closed the connection unexpectedly
	This probably means the server terminated abnormally
	before or while processing the request.

[SQL: SELECT users.id AS users_id, users.name AS users_name, users.category_id AS users_category_id 
FROM users 
WHERE users.name = %(name_1)s 
 LIMIT %(param_1)s]
[parameters: {'name_1': 'Affirmation Module', 'param_1': 1}]
(Background on this error at: http://sqlalche.me/e/e3q8)  File "/home/thierry/Desktop/stanford_pwbt/popbots-refactor/controllers/main.py", line 437, in dialog_flow_engine
    command,response_list,image,bot_name,reply_markup  = response_engine(session,user_id,user_message)
  File "/home/thierry/Desktop/stanford_pwbt/popbots-refactor/utils.py", line 66, in wrapper
    result = func(*args, **kwargs)
  File "/home/thierry/Desktop/stanford_pwbt/popbots-refactor/controllers/main.py", line 287, in response_engine
    current_index,bot_id,content_index = change_bot(session,current_bot_id=bot_id,destination_bot_name=next_bot_name)
  File "/home/thierry/Desktop/stanford_pwbt/popbots-refactor/controllers/main.py", line 54, in change_bot
    bot_id = get_user_id_from_name(destination_bot_name)
  File "/home/thierry/Desktop/stanford_pwbt/popbots-refactor/models/utils.py", line 10, in get_user_id_from_name
    bot = session.query(Users).filter_by(name=name).first()
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/orm/query.py", line 3298, in first
    ret = list(self[0:1])
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/orm/query.py", line 3076, in __getitem__
    return list(res)
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/orm/query.py", line 3403, in __iter__
    return self._execute_and_instances(context)
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/orm/query.py", line 3428, in _execute_and_instances
    result = conn.execute(querycontext.statement, self._params)
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 984, in execute
    return meth(self, multiparams, params)
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/sql/elements.py", line 293, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 1097, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 1287, in _execute_context
    self._handle_dbapi_exception(
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 1481, in _handle_dbapi_exception
    util.raise_(
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/util/compat.py", line 178, in raise_
    raise exception
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 1247, in _execute_context
    self.dialect.do_execute(
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/engine/default.py", line 588, in do_execute
    cursor.execute(statement, parameters)

2020-05-08 17:17:00,391 ERROR :loudspeaker: [FATAL BASE ERROR](sqlalchemy.exc.InvalidRequestError) Can't reconnect until invalid transaction is rolled back
[SQL: SELECT users.id AS users_id, users.name AS users_name, users.category_id AS users_category_id 
FROM users 
WHERE users.name = %(name_1)s 
 LIMIT %(param_1)s]
[parameters: [immutabledict({})]]  File "/home/thierry/Desktop/stanford_pwbt/popbots-refactor/controllers/main.py", line 437, in dialog_flow_engine
    command,response_list,image,bot_name,reply_markup  = response_engine(session,user_id,user_message)
  File "/home/thierry/Desktop/stanford_pwbt/popbots-refactor/utils.py", line 66, in wrapper
    result = func(*args, **kwargs)
  File "/home/thierry/Desktop/stanford_pwbt/popbots-refactor/controllers/main.py", line 196, in response_engine
    bot_id = get_user_id_from_name("Greeting Module")
  File "/home/thierry/Desktop/stanford_pwbt/popbots-refactor/models/utils.py", line 10, in get_user_id_from_name
    bot = session.query(Users).filter_by(name=name).first()
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/orm/query.py", line 3298, in first
    ret = list(self[0:1])
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/orm/query.py", line 3076, in __getitem__
    return list(res)
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/orm/query.py", line 3403, in __iter__
    return self._execute_and_instances(context)
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/orm/query.py", line 3428, in _execute_and_instances
    result = conn.execute(querycontext.statement, self._params)
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 984, in execute
    return meth(self, multiparams, params)
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/sql/elements.py", line 293, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 1097, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 1177, in _execute_context
    self._handle_dbapi_exception(
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 1481, in _handle_dbapi_exception
    util.raise_(
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/util/compat.py", line 178, in raise_
    raise exception
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 1173, in _execute_context
    conn = self._revalidate_connection()
  File "/home/thierry/Desktop/stanford_pwbt/popbots_venv/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 456, in _revalidate_connection
    raise exc.InvalidRequestError(

2020-05-08 17:45:28,805 ERROR :loudspeaker: [FATAL BASE ERROR]'NoneType' object has no attribute 'replace'  File "/home/thierry/Desktop/stanford_pwbt/popbots-refactor/controllers/main.py", line 437, in dialog_flow_engine
    command,response_list,image,bot_name,reply_markup  = response_engine(session,user_id,user_message)
  File "/home/thierry/Desktop/stanford_pwbt/popbots-refactor/utils.py", line 66, in wrapper
    result = func(*args, **kwargs)
  File "/home/thierry/Desktop/stanford_pwbt/popbots-refactor/controllers/main.py", line 263, in response_engine
    bot_text,current_index,keyboard,triggers = get_bot_response(bot_user=bot_user,next_index=next_index,user_response=user_message,content_index=content_index,stressor_object=stressor)
  File "/home/thierry/Desktop/stanford_pwbt/popbots-refactor/utils.py", line 66, in wrapper
    result = func(*args, **kwargs)
  File "/home/thierry/Desktop/stanford_pwbt/popbots-refactor/controllers/message.py", line 303, in get_bot_response
    try:selected_feature,triggers,parsed_features= selector_to_feature_or_trigger(selectors=selectors_name,input_string=user_response)
  File "/home/thierry/Desktop/stanford_pwbt/popbots-refactor/controllers/message.py", line 208, in selector_to_feature_or_trigger
    feature,trigger,parsed_features = feature_selector_split(input_string,selector)
  File "/home/thierry/Desktop/stanford_pwbt/popbots-refactor/controllers/message.py", line 150, in feature_selector_split
    all_selectors.append(return_feature(input_string,fea,alternative))
  File "/home/thierry/Desktop/stanford_pwbt/popbots-refactor/controllers/message.py", line 106, in return_feature
    regex = regex.replace(" ","") #replacing empty spaces in case

2020-05-08 17:48:41,820 ERROR :loudspeaker: [FATAL BASE ERROR]'NoneType' object has no attribute 'replace'  File "/home/thierry/Desktop/stanford_pwbt/popbots-refactor/controllers/main.py", line 437, in dialog_flow_engine
    command,response_list,image,bot_name,reply_markup  = response_engine(session,user_id,user_message)
  File "/home/thierry/Desktop/stanford_pwbt/popbots-refactor/utils.py", line 66, in wrapper
    result = func(*args, **kwargs)
  File "/home/thierry/Desktop/stanford_pwbt/popbots-refactor/controllers/main.py", line 263, in response_engine
    bot_text,current_index,keyboard,triggers = get_bot_response(bot_user=bot_user,next_index=next_index,user_response=user_message,content_index=content_index,stressor_object=stressor)
  File "/home/thierry/Desktop/stanford_pwbt/popbots-refactor/utils.py", line 66, in wrapper
    result = func(*args, **kwargs)
  File "/home/thierry/Desktop/stanford_pwbt/popbots-refactor/controllers/message.py", line 303, in get_bot_response
    try:selected_feature,triggers,parsed_features= selector_to_feature_or_trigger(selectors=selectors_name,input_string=user_response)
  File "/home/thierry/Desktop/stanford_pwbt/popbots-refactor/controllers/message.py", line 208, in selector_to_feature_or_trigger
    feature,trigger,parsed_features = feature_selector_split(input_string,selector)
  File "/home/thierry/Desktop/stanford_pwbt/popbots-refactor/controllers/message.py", line 150, in feature_selector_split
    all_selectors.append(return_feature(input_string,fea,alternative))
  File "/home/thierry/Desktop/stanford_pwbt/popbots-refactor/controllers/message.py", line 106, in return_feature
    regex = regex.replace(" ","") #replacing empty spaces in case

